.globl _kbver
.data
_kbver:
.dc.b $40,$28,$23,$29,$76,$6D,$6B,$62,$2E,$63,$9,$31,$2E,$33,$30,$0
.bss
L2:.ds.b 4
.text
.bss
L3:.ds.b 4
.text
.bss
L4:.ds.b 2
.text
.bss
L5:.ds.b 2
.text
.bss
L6:.ds.b 4
.text
.data
L7:.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F8
.dc.b $10
.dc.b $FA
.dc.b $1
.dc.b $FA
.dc.b $2
.dc.b $F8
.dc.b $1
.dc.b $F8
.dc.b $2
.dc.b $F8
.dc.b $20
.dc.b $F6
.dc.b $0
.dc.b $F8
.dc.b $8
.dc.b $F7
.dc.b $10
.dc.b $F6
.dc.b $0
.dc.b $1
.dc.b $0
.dc.b $1
.dc.b $1
.dc.b $FF
.dc.b $0
.dc.b $1
.dc.b $2
.dc.b $1
.dc.b $D
.dc.b $FC
.dc.b $51
.dc.b $FC
.dc.b $57
.dc.b $FC
.dc.b $45
.dc.b $FC
.dc.b $41
.dc.b $FC
.dc.b $53
.dc.b $FC
.dc.b $44
.dc.b $FC
.dc.b $5A
.dc.b $FC
.dc.b $58
.dc.b $1
.dc.b $17
.dc.b $F9
.dc.b $1
.dc.b $F6
.dc.b $0
.dc.b $FB
.dc.b $1
.dc.b $FB
.dc.b $2
.dc.b $FB
.dc.b $3
.dc.b $1
.dc.b $3
.dc.b $1
.dc.b $4
.dc.b $1
.dc.b $5
.dc.b $FC
.dc.b $52
.dc.b $FC
.dc.b $54
.dc.b $FC
.dc.b $59
.dc.b $FC
.dc.b $46
.dc.b $FC
.dc.b $47
.dc.b $FC
.dc.b $43
.dc.b $FC
.dc.b $56
.dc.b $FC
.dc.b $42
.dc.b $F9
.dc.b $2
.dc.b $F6
.dc.b $0
.dc.b $FB
.dc.b $4
.dc.b $FB
.dc.b $5
.dc.b $FB
.dc.b $6
.dc.b $1
.dc.b $6
.dc.b $1
.dc.b $7
.dc.b $1
.dc.b $8
.dc.b $FC
.dc.b $55
.dc.b $FC
.dc.b $49
.dc.b $FC
.dc.b $48
.dc.b $FC
.dc.b $4A
.dc.b $FC
.dc.b $4B
.dc.b $FC
.dc.b $4E
.dc.b $FC
.dc.b $4D
.dc.b $1
.dc.b $14
.dc.b $F7
.dc.b $1
.dc.b $F6
.dc.b $0
.dc.b $FB
.dc.b $7
.dc.b $FB
.dc.b $8
.dc.b $1
.dc.b $9
.dc.b $1
.dc.b $A
.dc.b $1
.dc.b $B
.dc.b $FC
.dc.b $4F
.dc.b $FC
.dc.b $50
.dc.b $1
.dc.b $E
.dc.b $FC
.dc.b $4C
.dc.b $1
.dc.b $11
.dc.b $1
.dc.b $12
.dc.b $1
.dc.b $15
.dc.b $1
.dc.b $16
.dc.b $F6
.dc.b $0
.dc.b $F7
.dc.b $2
.dc.b $F6
.dc.b $0
.dc.b $FB
.dc.b $9
.dc.b $FB
.dc.b $A
.dc.b $FB
.dc.b $B
.dc.b $FB
.dc.b $C
.dc.b $1
.dc.b $C
.dc.b $FD
.dc.b $0
.dc.b $1
.dc.b $F
.dc.b $1
.dc.b $10
.dc.b $0
.dc.b $1
.dc.b $1
.dc.b $13
.dc.b $0
.dc.b $3
.dc.b $0
.dc.b $7
.dc.b $0
.dc.b $9
.dc.b $0
.dc.b $6
.dc.b $F7
.dc.b $20
.dc.b $F7
.dc.b $8
.dc.b $FB
.dc.b $D
.dc.b $FB
.dc.b $E
.dc.b $FB
.dc.b $F
.dc.b $FB
.dc.b $10
.dc.b $FE
.dc.b $0
.dc.b $2
.dc.b $A
.dc.b $0
.dc.b $2
.dc.b $F6
.dc.b $0
.dc.b $2
.dc.b $7
.dc.b $0
.dc.b $4
.dc.b $2
.dc.b $4
.dc.b $0
.dc.b $8
.dc.b $2
.dc.b $1
.dc.b $2
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $F6
.dc.b $0
.dc.b $2
.dc.b $B
.dc.b $2
.dc.b $C
.dc.b $2
.dc.b $D
.dc.b $2
.dc.b $8
.dc.b $2
.dc.b $9
.dc.b $2
.dc.b $E
.dc.b $2
.dc.b $5
.dc.b $2
.dc.b $6
.dc.b $2
.dc.b $F
.dc.b $2
.dc.b $2
.dc.b $2
.dc.b $3
.dc.b $2
.dc.b $10
.dc.b $2
.dc.b $11
.dc.b $0
.dc.b $0
.dc.b $F6
.dc.b $0
.text
.data
L8:.dc.b $30
.dc.b $18
.dc.b $10
.dc.b $12
.dc.b $13
.dc.b $0
.dc.b $11
.dc.b $1
.dc.b $2
.dc.b $3
.text
.data
L9:.dc.b $60
.dc.b $31
.dc.b $33
.dc.b $34
.dc.b $35
.dc.b $36
.dc.b $37
.dc.b $38
.dc.b $39
.dc.b $30
.dc.b $2D
.dc.b $3D
.dc.b $7F
.dc.b $9
.dc.b $5B
.dc.b $5D
.dc.b $5C
.dc.b $3B
.dc.b $27
.dc.b $D
.dc.b $2C
.dc.b $2E
.dc.b $2F
.dc.b $20
.dc.b $9
.even
.text
.data
L10:.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $1B
.dc.b $1D
.dc.b $1C
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.even
.text
.data
L11:.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $1E
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $1F
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.even
.text
.data
L12:.dc.b $7E
.dc.b $21
.dc.b $23
.dc.b $24
.dc.b $25
.dc.b $5E
.dc.b $26
.dc.b $2A
.dc.b $28
.dc.b $29
.dc.b $5F
.dc.b $2B
.dc.b $7F
.dc.b $9
.dc.b $7B
.dc.b $7D
.dc.b $7C
.dc.b $3A
.dc.b $22
.dc.b $D
.dc.b $3C
.dc.b $3E
.dc.b $3F
.dc.b $20
.dc.b $9
.even
.text
.data
L13:.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $0
.dc.b $7F
.text
.data
L14:.dc.b $20
.dc.b $21
.dc.b $22
.dc.b $23
.dc.b $24
.dc.b $25
.dc.b $26
.dc.b $27
.dc.b $28
.dc.b $29
.dc.b $2A
.dc.b $2B
.dc.b $2C
.dc.b $2D
.dc.b $2E
.dc.b $2F
.dc.b $31
.dc.b $32
.text
.data
L15:
|line 822
.dc.l L8
|line 823
.dc.l L9
|line 825
.dc.l L14
.text
.data
L16:
|line 839
.dc.l L9
|line 840
.dc.l L10
.dc.l $0
.dc.l $0
|line 843
.dc.l L12
|line 844
.dc.l L11
.dc.l $0
.dc.l $0
.text
.globl _tb
.data
_tb:
.dc.b $0
.dc.b $0
.dc.w $0
.dc.l $0
.dc.l $0
.globl _kbinit
.text
_kbinit:
~~kbinit:
~unitx=8
link R14,#-12
movem.l R6-R7,-(sp)
~cr=R7
~pmap=-12
|line 883
|line 884
move.l 8(R14),R0
ext.w R0
cmp #1,R0
ble L18
|line 884
clr.l R0
bra L17
|line 885
|line 886
L18:
|line 887
clr.l -12(R14)
|line 888
move.l #$f19f00,-8(R14)
|line 889
move.l #$14,-4(R14)
|line 890
move.l R14,(sp)
add.l #-12,(sp)
jsr _null
move.l R0,L3
|line 893
move.l #$f1a031,-8(R14)
|line 894
move.l #$8,-4(R14)
|line 895
move.l R14,(sp)
add.l #-12,(sp)
jsr _null
move.l R0,L6
|line 898
move.l #$f19f85,-8(R14)
|line 899
move.l #$1,-4(R14)
|line 900
move.l R14,(sp)
add.l #-12,(sp)
jsr _null
move.l R0,L2
|line 903
move #-129,R0
ext.w R0
move R0,-(sp)
move.l L3,R8
move.b 9(R8),R0
and (sp)+,R0
move.b R0,9(R8)
|line 904
move.l L3,R8
and.b #-17,9(R8)
|line 905
|line 906
|line 907
move.l #$1,8+_tb
|line 908
|line 909
move.l #_tb,(sp)
move #24,-(sp)
jsr _supif
addq.l #2,sp
|line 910
|line 911
|line 913
move.l L3,R8
or.b #16,9(R8)
|line 914
|line 915
|line 916
move.l #$1f4,8+_tb
|line 917
|line 918
move.l #_tb,(sp)
move #24,-(sp)
jsr _supif
addq.l #2,sp
|line 919
|line 920
|line 930
move.l L6,R8
move.b 6(R8),R7
|line 931
move.l L6,R8
move.b #94,4(R8)
|line 932
move.l L6,R8
move.b #123,4(R8)
|line 933
move.l L6,R8
move.b #21,6(R8)
|line 935
move.l #$42,(sp)
move.l #_kbint,-(sp)
jsr _null
addq.l #4,sp
|line 937
clr.l R0
bra L17
L17:tst.l (sp)+
movem.l (sp)+,R7-R7
unlk R14
rts
.globl _kbselect
.text
_kbselect:
~~kbselect:
link R14,#-6
~reg=-2
|line 958
move.l L6,R8
move.b #128,(R8)
|line 961
bra L22
L21:L22:
|line 962
move.l L6,R8
btst #1,2(R8)
beq L21
L20:
|line 971
move.l L6,R8
move.b (R8),-2(R14)
|line 972
move.l L3,R8
or.b #128,9(R8)
|line 974
move.l L6,R8
move.b #160,(R8)
|line 975
clr.l R0
bra L19
L19:unlk R14
rts
.globl _kbdecode
.text
_kbdecode:
~~kbdecode:
~scn_code=9
~status=10
link R14,#0
movem.l R3-R7,-(sp)
~scn_tbl_=R7
~group_x=R6
~rtn_x=R5
~rv=R4
|line 1051
move.b 9(R14),R0
ext.w R0
move R0,R8
add.l R8,R8
add.l #L7,R8
move.b 1(R8),R7
|line 1054
move.b 9(R14),R0
ext.w R0
move R0,R8
add.l R8,R8
add.l #L7,R8
move.b (R8),R6
|line 1056
clr R4
|line 1058
move.l 10(R14),R8
clr (R8)
*line 1060
|line 1061
tst.b R6
bge L24
|line 1062
move.b R6,R0
ext.w R0
neg R0
move.b R0,R6
|line 1063
|line 1064
|line 1065
|line 1066
|line 1067
|line 1068
|line 1069
|line 1070
|line 1071
cmp.b #5,R6
bgt L25
move.l L2,R8
btst #4,(R8)
bne L25
|line 1071
move #10,R5
|line 1072
bra L26
L25:
|line 1073
move.b R6,R5
ext.w R5
L26:
|line 1074
|line 1075
move R5,R0
bra L28
|line 1076
L29:
|line 1077
|line 1078
|line 1079
|line 1080
|line 1081
|line 1082
|line 1083
|line 1084
|line 1085
|line 1086
|line 1087
|line 1088
|line 1089
|line 1090
|line 1091
|line 1092
btst #0,L4
bne L30
|line 1093
|line 1094
btst #2,L4
beq L31
|line 1094
move #64,R4
|line 1095
bra L32
L31:
|line 1096
move #50,R4
L32:
|line 1097
|line 1098
bra L33
L30:
|line 1099
|line 1100
|line 1101
btst #2,L4
beq L34
|line 1101
clr R4
|line 1102
bra L35
L34:
|line 1103
move.b L4,R4
ext.w R4
and #1,R4
asl #8,R4
or #50,R4
L35:L33:
|line 1104
|line 1105
|line 1106
move.l 10(R14),R8
move #1,(R8)
bra L27
|line 1107
|line 1108
L36:
|line 1109
|line 1110
|line 1111
|line 1112
|line 1113
|line 1114
|line 1115
|line 1116
|line 1117
|line 1118
|line 1119
btst #2,L4
beq L37
|line 1119
move.b L4,R4
ext.w R4
and #1,R4
asl #8,R4
or #8198,R4
|line 1120
bra L38
L37:
|line 1121
move #27,R4
L38:
|line 1122
move.l 10(R14),R8
move #1,(R8)
bra L27
|line 1123
|line 1124
L39:
|line 1125
|line 1126
|line 1127
|line 1128
|line 1129
|line 1130
|line 1131
|line 1132
|line 1133
|line 1134
|line 1135
btst #2,L4
beq L40
|line 1135
move #8192,R4
|line 1136
bra L41
L40:
|line 1137
move #8197,R4
L41:
|line 1138
move.b L4,R0
ext.w R0
and #1,R0
asl #8,R0
or R0,R4
|line 1139
move.l 10(R14),R8
move #1,(R8)
bra L27
|line 1140
|line 1141
L42:
|line 1142
|line 1143
|line 1144
|line 1145
|line 1146
|line 1147
|line 1148
|line 1149
|line 1150
|line 1151
|line 1152
|line 1153
|line 1154
btst #0,L4
beq L43
|line 1154
move.b R7,R4
ext.w R4
add #-64,R4
move.b L4,R0
ext.w R0
and #4,R0
asl #8,R0
or R0,R4
bra L44
L43:
|line 1155
|line 1156
btst #4,L4
beq L45
|line 1157
|line 1158
btst #2,L4
beq L46
|line 1158
move.b R7,R4
ext.w R4
add #32,R4
|line 1159
bra L47
L46:
|line 1160
move.b R7,R4
ext.w R4
L47:
|line 1161
bra L48
L45:
|line 1162
|line 1163
btst #2,L4
beq L49
|line 1163
move.b R7,R4
ext.w R4
|line 1164
bra L50
L49:
|line 1165
move.b R7,R4
ext.w R4
add #32,R4
L50:L48:L44:
|line 1166
|line 1167
move.l 10(R14),R8
move #1,(R8)
bra L27
|line 1168
|line 1169
L51:
|line 1170
|line 1171
|line 1172
|line 1173
|line 1174
|line 1175
|line 1176
|line 1177
move.b R7,R4
ext.w R4
move.b L4,R0
ext.w R0
and #5,R0
asl #8,R0
or R0,R4
or #4096,R4
|line 1178
move.l 10(R14),R8
move #1,(R8)
bra L27
|line 1179
|line 1180
L52:
|line 1181
|line 1182
|line 1183
|line 1184
|line 1185
|line 1186
|line 1187
|line 1188
|line 1189
|line 1190
move.b R7,R0
ext.w R0
or.b R0,L5
|line 1191
or.b #4,L4
|line 1192
jsr _mode_chg
bra L27
|line 1193
|line 1194
L53:
|line 1195
|line 1196
|line 1197
|line 1198
|line 1199
|line 1200
|line 1201
|line 1202
move.b R7,R0
ext.w R0
not R0
move.b L5,R1
and.b R0,R1
move.b R1,L5
|line 1203
|line 1204
tst.b L5
bne L54
|line 1205
and.b #-5,L4
|line 1206
jsr _mode_chg
|line 1207
L54:bra L27
|line 1208
|line 1209
L55:
|line 1210
|line 1211
|line 1212
|line 1213
|line 1214
|line 1215
|line 1216
|line 1217
|line 1218
|line 1219
move.b R7,R0
ext.w R0
or.b R0,L4
|line 1220
jsr _mode_chg
bra L27
|line 1221
|line 1222
L56:
|line 1223
|line 1224
move.b R7,R0
ext.w R0
not R0
move.b L4,R1
and.b R0,R1
move.b R1,L4
|line 1225
jsr _mode_chg
bra L27
|line 1226
|line 1227
L57:
|line 1228
bra L27
|line 1229
bra L27
L28:sub #1,R0
cmp #9,R0
bhi L27
asl #2,R0
move R0,R8
add.l #L58,R8
move.l (R8),R8
jmp (R8)
.data
L58:.dc.l L29
.dc.l L36
.dc.l L39
.dc.l L42
.dc.l L51
.dc.l L52
.dc.l L53
.dc.l L55
.dc.l L56
.dc.l L57
.text
L27:
|line 1230
|line 1231
|line 1232
bra L59
L24:
|line 1233
|line 1234
|line 1235
|line 1236
|line 1237
move.l L2,R8
btst #4,(R8)
beq L60
|line 1238
move.b R6,R0
ext.w R0
move R0,R8
add.l R8,R8
add.l R8,R8
move.l #L15,R9
move.l 0(R8,R9.l),R8
move.b R7,R1
ext.w R1
move.b 0(R8,R1),R0
ext.w R0
move R0,R4
|line 1239
move.b R6,R0
ext.w R0
bra L62
|line 1240
L63:
|line 1241
|line 1242
|line 1243
tst R4
beq L64
|line 1244
move.b L4,R0
ext.w R0
and #5,R0
asl #8,R0
or #8192,R0
or R0,R4
|line 1245
move.l 10(R14),R8
move #1,(R8)
|line 1246
L64:bra L61
|line 1247
|line 1248
L65:
|line 1249
|line 1250
|line 1251
|line 1252
|line 1253
|line 1254
|line 1255
|line 1256
|line 1257
|line 1258
|line 1259
|line 1260
|line 1261
|line 1262
tst R4
bne L66
|line 1263
|line 1264
btst #2,L4
beq L67
|line 1264
move.b R7,R0
ext.w R0
move R0,R8
move.l #L12,R9
move.b 0(R8,R9.l),R0
ext.w R0
move R0,R4
|line 1265
bra L68
L67:
|line 1266
move.b R7,R0
ext.w R0
move R0,R8
move.l #L9,R9
move.b 0(R8,R9.l),R0
ext.w R0
move R0,R4
L68:
|line 1267
or #256,R4
|line 1268
L66:
|line 1269
move.l 10(R14),R8
move #1,(R8)
bra L61
|line 1270
|line 1271
L69:
|line 1272
|line 1273
|line 1274
|line 1275
|line 1276
|line 1277
|line 1278
|line 1279
|line 1280
|line 1281
tst R4
beq L70
|line 1282
|line 1283
cmp #127,R4
bne L71
|line 1283
clr R4
L71:
|line 1284
move.b L4,R0
ext.w R0
and #5,R0
asl #8,R0
or #8192,R0
or R0,R4
|line 1285
move.l 10(R14),R8
move #1,(R8)
|line 1286
L70:bra L61
|line 1287
bra L61
L62:tst R0
beq L63
cmp #1,R0
beq L65
cmp #2,R0
beq L69
bra L61
L61:
|line 1288
|line 1289
L60:L59:
|line 1298
move.b L4,R0
ext.w R0
and #2,R0
asl #8,R0
or R0,R4
|line 1300
move R4,R0
bra L23
L23:tst.l (sp)+
movem.l (sp)+,R4-R7
unlk R14
rts
.globl _mode_chg
.text
_mode_chg:
~~mode_chg:
link R14,#-4
|line 1306
move.b L4,R0
ext.w R0
and #5,R0
move R0,R8
add.l R8,R8
add.l R8,R8
add.l #L16,R8
move.l (R8),4+L15
|line 1308
|line 1309
btst #3,L4
beq L73
|line 1309
move.l #L13,8+L15
|line 1310
bra L74
L73:
|line 1311
move.l #L14,8+L15
L74:bra L72
L72:unlk R14
rts
.globl _kbint
.text
_kbint:
~~kbint:
link R14,#0
movem.l R6-R7,-(sp)
~scn_code=R7
|line 1338
|line 1339
move.l L6,R8
move.b 2(R8),R0
ext.w R0
and #56,R0
bne L76
|line 1340
|line 1341
|line 1342
move.l L6,R8
move.b (R8),R0
ext.w R0
move.b R0,R7
and #128,R0
bne L77
|line 1343
|line 1344
clr.l (sp)
move.b R7,R0
ext.w R0
ext.l R0
move.l R0,-(sp)
jsr _kbasr
addq.l #4,sp
|line 1345
|line 1346
move.l L6,R8
move.b #160,(R8)
|line 1347
clr R0
bra L75
|line 1348
L77:
|line 1349
|line 1350
|line 1351
|line 1352
|line 1353
|line 1354
|line 1355
|line 1356
|line 1357
L76:
|line 1358
move.l L6,R8
move.b (R8),R7
|line 1359
move.l L6,R8
move.b #21,6(R8)
|line 1366
move.l L6,R8
move.b #208,(R8)
|line 1367
clr R0
bra L75
L75:tst.l (sp)+
movem.l (sp)+,R7-R7
unlk R14
rts
.globl _kbasr
.text
_kbasr:
~~kbasr:
~scn_code=8
link R14,#-8
~ch=-2
~status=-4
|line 1390
move.l R14,(sp)
sub.l #4,(sp)
move.l 8(R14),R0
ext.w R0
move R0,-(sp)
jsr _kbdecode
addq.l #2,sp
move R0,-2(R14)
|line 1401
|line 1402
|line 1403
cmp #1,-4(R14)
bne L79
|line 1403
move -2(R14),(sp)
jsr _kbq
|line 1404
L79:L78:unlk R14
rts
.data
