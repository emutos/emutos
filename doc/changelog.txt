Start... early ages

16. May. 1985
- GEMDOS 1.0 released by Digital Research, Inc.

05. Jun. 1987  ACH	PROC.C
- Problem - After physical disk error COMMAND.PRG gives "Command not
  found." message for all subsequent external commands. Fix - Changed the
  error handling code in  xexec() to always do an ixterm(t); on any disk
  error, thus freeing memory.

26. Jun. 1987  ACH	TIME.C & BIOS
- To enable GEMDOS to take advantage of real-time clock/calendars a new
  BIOS function (11h) has been added. Whenever the BDOS sets a new time
  or date this function is called and, if the hardware supports it, the
  real-time clock can be updated. When the BDOS needs the current time or
  date the function is called to allow  the BIOS to update the internal
  BDOS values. If there is no hardware clock the BIOS can  simply ignore
  this call as the BDOS still maintains the time and date internally
  based on the system tick.

16. Sep. 1987  ACH	SUP.C
- Problem - the internal date and time variables used to time stamp file
  updates are set to 0 when the OS starts up.

  Fix - Changed cinit() in SUP.C to call new BIOS date_time() function
  (11h) so that the BIOS can initialise the internal variables from a 
  hardware real-time clock, if supported.

09. Oct. 1987 ACH	BDOSMAIN.C
- Duplicate definition of supstk and SUPSIZ removed from this module.
  (Duplicated in  PROC.C and FS.H.) If the supervisor stack is to be OEM 
  configurable some more reliable method must be devised.

19. Nov. 1987 ACH	RWA.A
- Added _lbmove, _bfill, _bmove routines. (These were supposed to be in
  something called TOOLS.ARC which was not supplied by DRI.)

===== MAD working on his own ===============================================

01. May. 2001
- Started working on GEMDOS -> EmuTOS

28. Jul. 2001 
- Working on MFP initialization

29. Jul. 2001
- Implementing Cartridge system for work with STonX
- Rewrite of vector setup

30. Jul. 2001
- rewrote some exception handlers
- implemented VBL handler
- implemented HBL handler
- implemented keyboard interrupt handler

04. Aug. 2001 
- working on the keyboard interrupt routine

05. Aug. 2001
- got the keyboard interrupt running (wow!)

06. Aug. 2001
- got the keyboard queue running 

07. Aug. 2001
- Mega ST clock should work - could not test yet
- Character blit implemented (not tested)
- VT52 emulator implemented (not yet blitted to screen)

10. Aug. 2001
- Worked on character blitting (not tested)

11. Aug. 2001
- Got first real character blitted to screen
- cons_out is basically working 

12. Aug. 2001
- Fighting much too long against a too small supervisor stack  :-(
- Got scrolling much to slowly working

13. Aug. 2001
- scrolling now faster
- worked on keyboard decoding for bconin (not tested)
- fixed linker configuration in Makefile (libgcc forgotten)

26. Aug. 2001
- trying to bring BDOS and BIOS together

29. Aug. 2001
- integrating STonX native BIOS emulation to BIOS

02. Sep. 2001 
- found out, where the basepage is for DTA stuff

04. Sep. 2001
- got memory setup descritor working 
- got the command loading running

09. Sep. 2001
- Uppercase/lowercase is now working
- got old command.prg compiled and started and basically WORKING!!!
- command.prg: directory navigation is working

10. Sep. 2001
- handlers for showing exceptions 0x08 - 0x20 written (atari's bombs)

24. Sep. 2001
- fixed bug in supervisor stack setup (stack was top of stack + size of stack)
- Now no garbage in the diskbuffer -> clean screen while ls or dir executing

25. Sep. 2001
- os_pal changed to word width
- Implemented extended TOS 1.02 header - no basepage set in STonX any longer!
- Did put .org 0x4f2 in front of _sysbase: in tosvars.s

===== Project created on Sourceforge ? ===================================

25. Sep. 2001 
- linea commented out of cartridge (LVL)
- added .even after .ascii strings (odd exception handlers) (LVL)
- rwa.s, startup.s - changed "dc.w 0" by '\0' at end of .ascii strings (LVL)
- padded tosvars.s so that _sysbase == 0x4F2 (LVL)
- fixed (?) malloc() bug (due to missing prototype in fs.h) (LVL)
- added/edited some copyright notices on top of files. (rwa.s, startup.s)

26. Sep. 2001
- change a prototype for xmgetblk - now command.prg load other programs!

30. Sep. 2001
- changed XBIOS stubs to right declaration. (MAD)

01. Oct. 2001
- ensured that the MIDI acia was inited (for KBD to work on stonc) (LVL)

05. Oct. 2001
- Makefile (LVL)
- printf() clone for debug messages (LVL)
- 8x16 font in high rez (LVL)
- put all default exception vectors in bios/vectors.s (LVL)
- clear bss before calling C code. (LVL)

06. Oct. 2001
- minor bug in vectors.s (LVL)
- linea stubs (LVL)
- SetScreen() in xbios.c
- some malloc debug info.
- added missing util directory (MAD)
- changed sysvarend to _bssend (it is the BSS, that ends! - got from DRI)
- added end.s with _bssend 

08. Oct. 2001
- started iorec and kbdvbase stuff (aim is to reimplement kbd.c to
  be compliant with the way TOS does it) (LVL)
- some debug info in Malloc(), bios(5)

09. Oct. 2001
- Got asm conout working - MiNT did run somewhat better (MAD)
- Includes some more needed lineavars initialized (_esc_init) (MAD)
- cleaned Makefile and end.s ("the end.s episode") (LVL)
- copy paste error in linea stubs, startup.s (LVL)

10. Oct. 2001
- EmuTOS now expects a cartridge of type 3, just as the original TOS. (THH)

11. Oct. 2001
- removed the cart directory and the cartridge - no longer needed (MAD)

12. Oct. 2001
- Initialised linea from startup.s (_esc_init -> _linea_init) (MAD)
- Cleaned up conio.c
- Cleaned up output stuff in bios.c
- Put all linea stuff in bios/linea.s
- Cleaned up some minor things in bdos/proc.c
- Changed linea/graphics init in bios/startup.s
- Set up half of memory config in bios/startup.s
- pseudo reentrant bios xbios trap handler (LVL)
- Supexec() (LVL)
- bios device functions arrays (bconstat_vec, ...) (LVL)

13. Oct. 2001
- Fixed some minor errors while compilation (MAD)
- Added more system vars in tosvars.s and fixed an error (no pun_ptr) (MAD)

14. Oct. 2001
- implemented full memory configuration - much much more memory now (MAD)
- implemented cursor (not blinking - this was easy) (MAD)
- Changed version string of command.prg  (MAD)
- correct fnt8x8 (previous one useless) and fnt8x16 (last char offset) (LVL)
- some progress on iorec, but still not in service (LVL)

16. Oct. 2001
- Fixed some bugs in bios.c (the bconoutx functions need 2 parameters!) (THH)

19. Oct. 2001
- Cleaned up and seperated memory initialisation in memory.s  (MAD)
- Cleaned up command.prg (got rid of cpm code) (MAD)

20. Oct. 2001
- added memmove and memset, erasing bmove, xmovs and bfill in bdos (LVL)
- midi and ikbd bios device functions; new ikbd interrupt (LVL)
- started to clean some headers (removed abbrev.h, btools.h) (LVL)
- added bconout5 (raw console) (LVL)

21. Oct. 2001
- mfp xbios functions; mfp init rewritten using xbios funcs. (LVL)
- vbl routine: added palette handling and vblqueue. (LVL)
- misc. xbios routines (vsync, random, ...) (LVL)
- warning free, automatic built date in command.prg (LVL)
- still some headers cleaning in bios/ and include/ (LVL)

22. Oct. 2001
- Video mode can be set hard in startup.s to all three modes!!! (MAD)
- Cursor is now blinking (thanks Laurent, for Timer stuff!) (MAD)
- switched off debugging for public release in startup.s: _print (MAD)

23. Oct. 2001
- Video mode recognition works (mono/color) (MAD)
- Emulated bigger screen resolutions work in mono mode  (MAD)

===== Initial release 0.1 ===================================================

24. Oct. 2001
- Changed all *.s assembler files to *.S, changed comments from "|" to "//"

27. Oct. 2001
- moved screen-related xbios functions in screen.c (LVL)
- added sound support (untested) in sound.c (LVL)
- added floppy support in floppy.c (LVL)
- started rewriting some of startup.c in C code (not completely done yet) (LVL)
- started cleaning old VME stuff in bios.c (LVL)
- native print is activated by a STONX_NATIVE_PRINT #define in config.h (LVL)

28. Oct. 2001
- emutos.img file now is 192 kb (MAD)
- rewrote complete linea initialization in C (bios/lineainit.c) (MAD)

31. Oct. 2001
- a TOS in RAM loaded using gemdos boot.prg (LVL)
- some memory fixes, got rid of end.o (LVL)
- a TOS in RAM loaded using an autoboot floppy (LVL)

01. Nov. 2001
- removed old stuff from bios.c and startup.s (LVL)
- fixed the BDOS-buffer-init bug: EmuTOS boots a real MegaSTE2!!! (LVL)
- Removed hardcoded default drive #defines
- added EmuCON (EmuTOS console, before command.prg) to EmuTOS      (MAD)
  This is not yet working (it seems command.c is not ROMable for now) 

02. Nov. 2001
- EmuCON is now working. (THH)
- Implemented cursconf (XBIOS 0x15)  (MAD)
- Removed F_IOCtl() and the MOUSE:, CLOCK: and NUL: devices.          (THH)
- Mapped the CON:, AUX: and PRN: devices to Atari values (-1, -2, -3) (THH)
- commented out XBIOS calls from command.c (for testing)

03. Nov. 2001
- run AUTO folder prgs, run EmuCON using Pexec(5) (LVL)
- localconf.h taken in consideration (LVL)
- implemented processor check and set of _longframe in BIOS/BDOS (MAD)
- IKBD and MegaRTC clock (setting time & date untested) (LVL)

04. Nov. 2001
- added old VDI sources from DRI (not running yet)

05. Nov. 2001.
- added forgotten bios/processor.h (MAD)

06. Nov. 2001
- US kbd default, optional DE and FR kbds, tools to add more KBD defs (LVL)
- changed joystick support in aciavecs.S (untested) (LVL)
- Makefile (updated clean and distclean, BUILDDATE also for CYGWIN) (LVL)
- Reimplemented bios/memory.S in a more readable manner   (MAD)

07. Nov. 2001
- Reimplemented bios/memory.S - is hopefully perfect now   (MAD)

08. Nov. 2001
- Added several ikbd-functions as base for mouse driver    (MAD)
- changed ikbdws (now 2. arg is UBYTE *ptr instead of LONG) (MAD)

11. Nov. 2001
- Put portab.h to include/ for bdos AND bios   (MAD)
- ripped out kprint() (it has been replaced by kprintf()  (MAD)

13. Nov. 2001
- Native Language support tools, french translation (LVL)
- asm glue for kprintf in startup.S (LVL)

15. Nov. 2001 
- Native Language support, german translation (MAD)
- introduced PTR in include/portab.h, which is a LONG (MAD)

16. Nov. 2001
- Fixed bug in font_ring init (MAD)

18. Nov. 2001 
- Initmous implemented (C part - no data from asm delivered yet)  (MAD)
- removed -Tdata= from Makefile (LVL)
- painfully ANSIfied bdos and removed nearly all warnings (LVL)
- minor changes (LVL)

21. Nov. 2001
- Changed all 'char's in bdos/ to 'BYTE', other will follow (MAD)

22. Nov. 2001
- Partially implemented unused mouse driver in bios/mouse.c (MAD)

24. Nov. 2001
- machine detection up to the MegaSTE and cookie jar filled (LVL)
- country setting now in Makefile, stored in header os_pal (LVL)
- nvram overrides country setting if present (not tested) (LVL)
- dates in EmuCON printed according to _IDT (LVL)
- 0xffff820e used when ste shifter present (LVL)
- added some xbios functions skeletons (LVL)
- a cvs trick to ensure obj/ directory is created even with update -d -P (LVL)
- floppy floprate() and flopfmt() untested (LVL)

25. Nov. 2001
- Worked on bios/mouse.c   (MAD)

26. Nov. 2001 
- got Initmous() working (thanks Laurent)  (MAD)
- changed all "VOID"s to "void" in bios/*.[hc]  (MAD)

27. Nov. 2001
- solved bdos-broken-when-floppy bug (xlseek proto wad badly ansified) (LVL)
- removed silly FOREVER, VOID, and others from portab.h (LVL)
- crude mediach(), TODO section and error names in floppy.c (LVL)
- static strcmp in util/nls.c conform to standard semantics (LVL)
- cksum handling of nvram (LVL)
- new 'hardware' section in status.txt (LVL)

28. Nov. 2001
- Did put all *.txt files in doc/, except this.   (MAD)

07. Dec. 2001
- EmuTOS now recognizes Falcon (by detecting VIDEL) and TT030
  (by detecting TT-Shifter). (joy)
- NVRAM is actually initialized now. Added functions for accessing the RTC
  in NVRAM. (joy)
- MegaRTC now checks whether there's the hardware present. (joy)
- clock.c works with the RTC in NVRAM. (joy)
- initinfo.c displays current date and time (sorry, no NLS enabled yet!) (joy)

08. Dec. 2001
- NO_IKBD_CLOCK forgot to disable the XBIOS gettime(). Fixed by disabling
  all lowlevel IKBD functions. STonX boots EmuTOS again. (joy)
- changed back all BYTE to char in bdos/*.[ch] (MAD)
- added/marked up some comments in bios/nvram.c (MAD)

09. Dec. 2001
- standalone command.prg (added replacement _() and N_()) (LVL)

11. Dec. 2001
- added many of the lacking linea-variables (MAD)
- fixed int overflow bug in scrolling in bios/consout.S:p_sc_up (MAD)
- changed scrolling to use memmove (better?) (MAD)

12. Dec. 2001
- changed todo.txt: b/w display bug is bug in STonX (MAD)
- changed bios/conout.S to C like comment style (MAD)

13. Dec. 2001
- ripped out some ugly old gotos in bdos/fsbuf.c:packit() (MAD)

15. Dec. 2001
- tool tounix.c to convert to Unix line ending (LVL)
- make cvsready to automate using expand, this tool, ... (LVL)
- make checkindent, make indent; updated coding rules for indent use (LVL)
- changed some files to remove indent warnings (did NOT indent files) (LVL)
- replaced explicit TABs in strings by \t in command.c (LVL)
- fixed bugs due to obsolete C code in command.c, and wrote a description of 
  these bugs in doc/old_code.txt to serve as a reference (LVL)
- moved NORETURN to portab.h (LVL)
- panic() now prints on the screen also (LVL)
- added assert() in kprint (LVL)
- minor changes (LVL)

19. Dec. 2001
- reworked tounix tool to handle temp file and error cases better (LVL)
- TMP variables in Makefile (LVL)
- unix line ending (doc/nls.txt, util/boot.c, tools/mkflop.c) (LVL)
- removed bios/kdump.c and bios/oldstuff (LVL)
- removed old dump stuff in bios/kprint (LVL)
- updated readme.txt (LVL)

20. Dec. 2001
- added "stop" macro to include/asm.h as Laurent suggested (joy)
- added calling the "stop" in bios/ikbd.c (surrounded by #ifdef) (joy)

28. Dec. 2001
- added Falcon memconf routine (joy)
- corrected the memtop in the memconf clear routine to 14MB (joy)
- added memval3 check/set (joy)
- added ramtop/ramvalid set (no FastRAM for now) (joy)
- added run-time check for Falcon MMU that fires a bus error
  on non-Falcon machines. This makes use of stack so the notice
  in bios/startup.S about meminit not using sp is not correct (joy)
- updated status.txt (the hw init paragraph) (joy)

31. Dec. 2001
- added FastRAM (TT-RAM) detection to bios/memory.S. Right now
  it is called if Falcon MMU was detected but generally I need
  to detect CPU type so it would work on TT as well. (joy)
- corrected // notice in bios/startup.S - the meminit actually
  needs stack pointer - for both the bus error handler and for
  occasionals bsr kprintf (joy)

01. Jan. 2002
- FastRAM detection now uses proper CPU check (joy)
- resetvec handling fixed (wrong check 'tst.b resetvec' removed) (joy)
- cartridge is defined at $00fa0000, not $fffa0000 - fixed. (joy)
- _check_read_byte now flushes pipelines at the correct places (joy)

03. Jan. 2002
- replaced "REG" by register in bios/ and bdos/  (MAD)
- made bdos/kpgmld.c better readable (MAD)

04. Jan. 2002 
- made bdos/fsio.c better readable (MAD)
- bios/memory.S makes use of routines in bios/detect.S (joy)

05. Jan. 2002
- fixed set_sr(0x0300) to 0x2300 in bios/screen.c:vsync() (LVL)
- added get_sr() macro in include/asm.h (LVL)
- renamed macro stop by stop2300, added the config variable in config.h (LVL)
- changed stop() usage in bios/ikbd.c (LVL)
- changed an explicit tab into \t in a string in command.c (LVL)
- made cvsready (LVL)

06. Jan. 2002
- fixed BAD bug in fsmain.c - the divmod() long number (byte offset of lseek)
  was stripped when converting to (int). Due to that relocation info couldn't
  be read from a file during Pexec() and that caused "invalid exec format"
  bugs. Actually most things in BDOS filesystem could never work! (joy)
- "061a executable file format" debug print corrected: "601a ..." (joy)

06. Jan. 2002
- optimized divmod() and moved it to bdos/fsio.c (MAD) 
- did put usr2xfr/xfr2usr to bdos/fsio.c too (MAD)
- CLI: added unix like commands mv, cp, pwd, format, clear, rmdir, mkdir (MAD)

07. Jan. 2002
- added GETBOOT bootsector extractor routine to EmuCON (MAD)
- fixed COPY/MOVE/CP/MV command (MAD)
- fixed NVRAM RTC getting/setting date (month is already 1..12) (joy)
- fixed printing of current time at bootup (month is already 1..12) (joy)
- disabled vsync() neverending loop (MonST works now) (joy)
- fixed LineA v_bytes_lin variable (Clocky works now) (joy)


08. Jan. 2002
- hopefully fixed vsync() - I had omitted 'extern' in the declaration
  'volatile LONG frclock;' inside the routine. (LVL)
- updated fr translations (LVL)

09. Jan. 2002
- bug now tells the number of untranslated entries in po files (LVL)
- make ikbd.dsm creates the 'gcc -S' output of file bios/ikbd.c (LVL)
- initinfo logo code rewritten: it's easier to change the picture now (LVL)
- initinfo messages displayed properly (the fore and back colors were
  not inited) - still the colors should probably be inited elsewhere (LVL)
- bell() and keyclick() now use TOS vars bell_hook and kcl_hook (LVL)
- added general block device functions in bios/blkdev.c (MAD)
- german translation updated (MAD)
- added doc/bugs.txt, entries from doc/todo.txt (MAD)

10. Jan. 2002
- bios/floppy.c: renamed flop_hdv_boot to flop_bootcheck
                 renamed do_hdv_boot to flop_hdv_boot 
                 should boot now after warmstart... (MAD)

13. Jan. 2002
- bios/floppy.c: moved BIOS functions (rwabs, getbpb, mediach) to blkdev.c
                 moved geometry from finfo to blkdev struct
                 moved last_access to devices struct
                 moved FATfs bootsector struct to blkdev.h
                 moved compute_cksum() to blkdev.c
                 added floppy_rw() (that's the lowlevel part of floppy_rwabs)
                 added (WORD dev) to flopunlk() in order to update last_access
                 added hackish init of floppy geometry to flopini() (joy)
- bios/floppy.h: disabled bpb struct
                 made getiword externally accessible (joy)
- bios/startup.S: added ara_DMAread() (for calling the aranym's DMAread) (joy)
- bios/tosvars.h: added long recnr parameter to rwabs (like AHDI 3.0) (joy)
- bios/bios.c: added long recnr parameter to bios_4 (like AHDI 3.0) (joy)
- bios/bios.h: enabled bpb struct (joy)
- bios/xbios.c: DMAread()/DMAwrite() implemented (joy)
- Makefile: added disk.c to source files (joy)
- bios/disk.[ch] created, DMAread()/DMAwrite() implemented (joy)
- bios/blkdev.c: deleted most of Martin's framework
                 added full AHDI 3.0 extended Rwabs() (yet to add MEDIACH check)
                 added getBPB() with auto 12/16-bit FAT detection
                 added Mediach() (same as was in floppy.c) (joy)
- bios/blkdev.h: blkdev structure reworked (maybe a bit too much)
                 bpb structure disabled - what's wrong with the bios.h one?
                 UNIT and PARTITION structures - first ideas, incomplete (joy)
- Comment: the only thing I am sure of is the Rwabs() implementation. I am not
           very sure about the blkdev/device concept. Also would need to set
           common language - how to call physical drive (unit? device? drive?)
           and how to call logical disk (C:, partition, disk?). The problem
           now is how many things can be detected during boot - the size of 
           partition, of the whole drive (especially with floppy) etc.
           bdos/fsio.c still strikes - passes null pointer for rwabs buffer.
           That needs to be debugged (or maybe rewritten completely). (joy)
- updated po/de.po, because of stupid translations by me (MAD)

14. Jan. 2002
- foreground color now inited in lineainit.c (LVL)
- CZ fonts (first phase - next will have a correct font_ring) (LVL)
- wrote doc/country.txt, an overview of country-dependent stuff (LVL)
- silly BIOS early memory init in biosmem.[ch], used in nvram (LVL)
- changed some struct {...} foo [] = syntax that Indent didn't like (LVL)
- removed from lineavars.h struct VIDEO_MODE used only inside lineainit.c (LVL)
- fixed typos in bios-level memory (LVL) 
- fixed the amount of fastram printed in debug mode (joy)
- set the C: in drvbits for the hacked up host access disk drive (joy)

15. Jan 2002
- disabled the bmem_allowed bug what Petr found in bios/biosmem.c (MAD)
- bios/detect.S: functions now keep register a2 intact (LVL)
- bios/kprint.c: temporarily removed console print in panic, until one
  knows of a way to be certain that the concole is configured (LVL)
- collected a number of <string.h> routines scattered around and put 
  them in util/string.c and include/string.h; merged btools.h with
  string.h to be consistent with standard ANSI C (LVL)
- bios/kprint.h: silly debug macro HERE kprintf()s the location in file (LVL)
- bios/bios.c: commented out VEC_ILLEGAL = brkpt; (LVL)
- transferred getmpb from bios.c to biosmem.c (LVL)
- bios/conout.S: fixed bconout5(c) bug when c >= 128 (LVL)
- removed obsolete bios/keyboard.h include/btools.h (LVL)
- in bios/vectors.S, init_user_vec no longer relies on the previous value of 
  register a1 from init_exc_vec (LVL)
- bios/blkdev.c - the floppy_init does not use the hdv_init vector. A: works
  under STonX again. (joy)
- bios/bios.c - increased the fixed size sector cache to 4kB sector. That's
  enough for partitions smaller than 512MB. Ideally it should be 32kB (joy).

16. Jan. 2002
- aes and vdi not exported in make tgz (LVL)
- bios/clock.c: enabled MegaRTC clock by commenting out validity test (LVL)
- bios/clock.c: removed old commented-out code (LVL)
- removed unused bdos/bdos.h (LVL)
- bdos/proc.c: setjmp warnings avoided by turning params into static vars (LVL)
- updated doc/install.txt (LVL)
- removed [ OK ] in initinfo, expanded abbreviated messages, and modified
  fr.po and de.po (LVL)
- bios/floppy.c: some untested unique FDC track register bookkeeping (LVL)
- made ramtop and ramvalid visible from C code (LVL)

19. Jan. 2002
- experimental autodetect ARAnyM or STonX native print (activated in 
  bios/config.h) (LVL)
- new setjmp/longjmp replacing older ones (LVL)
- updated todo list (LVL)
- started fastram support in bdos (LVL)
- fixed some function prototypes in bios.c (LVL)
- removed cli/Makefile (LVL)
- implemented the font_ring as 3 lists of linked fontheaders (MAD)
- documented all tosvars in bios/tosvar.h till 0x5b0 (MAD)

20. Jan. 2002
- in bios/lineainit.c there is now the sysfonts array for linea.
  font_ring is not longer used by linea (MAD).
- keyboard reset (Alt+Ctrl+Del(+RShift)) implemented (joy)
- trying to get 16-bit sector number working in BDOS - one workaround
  in fsbuf.c makes DIR (fsfirst/fsnext) working correctly (it seems).
  The NEGATIVE_RECN value (currently -200) should be fixed when it will be
  clear what is FAT/DIR negative recn and what is unsigned recn in signed int.
  FAT traversing seems to be broken (Pexec fails for some files) (joy)
- blkdev.h: retrying in emulator is not necessary (joy)
- blkdev.c: 16-bit recn should work now (joy)

21. Jan. 2002
- in bios/lineainit.c: removed font_ring initialization (MAD)
- re-wrote completely Pexec() for header flags support. I kept the old routine
  for reference, but ultimately it will go away. Fastram is allocated when 
  requested but it is still not freed (the *term routines in proc need to
  be changed as well); Pexec() flag 6 supported. I did not test on Fastram but
  all of autoexec, EmuCON, loading progs from C: and A: work. (LVL)

22. Jan. 2002
- untested ttram-compliant internal memory stuff in proc.c (LVL)
- cleaned up bios/biosmem.c:bmem_init, removed old _b_mdx from startup.S (MAD)
- put diskbuf from startup.S to floppy.c, made dskbufp a pointer (MAD)
- put parallel and serial output funcs from asm to chardev.c (MAD)
- put cpu_init(), cooki_init() and machine_init() to the beginning of the 
  C-startup procedure of bios.c (MAD)
- TT-RAM is added to BDOS memory by calling Maddalt (should be changed) (joy)
- free TT-RAM is displayed in initinfo.c (joy)
- put diskbuf to blkdev.c (MAD)

23. Jan. 2002
- Did move the BCB and bufl_init to bdos/fsbuf.c (MAD)
- updated po/de.po po/fr.po for Fast-RAM texts (MAD)
- did put BPB in bios/blkdev.h (MAD)

25. Jan. 2002
- Did put drvbit stuff into bios/blkdev.c (MAD)
- cleaned up bios/bios.c a bit (MAD)

26. Jan. 2002
- make nodepend does not alter Makefile unnecessarily (faster CVS?) (LVL)
- ramtos reloc address derived automatically (RAMTOS works again) (LVL)
- bdos/pkgmld.c: PF_FASTLOAD implemented, deleted old implementation (LVL)
- bdos/umem.c: has_ttram properly set in Maddalt() (LVL)
- bdos/proc.c: deleted old Pexec implementation (LVL)
- panic() prints on screen if linea is inited (LVL)
- added new BDOS memory functions to doc/status.txt (LVL)
- added make target 512 and some related hints in Makefile (MAD)
- added code for Atari disk partitions detecting (unfinished yet) (joy)
- a check for Control key added to the AUTO folder execution (joy)
- #if ARANYM_NATIVE_DISK added to bios/disk.c - so it doesn't kill STonX (joy)

27. Jan. 2002
- changed kcprintf() calls in panic() to vkcprintf for good CR/LF (MAD)
- drive and partition scanning finished (joy)
- initinfo shows the available gemdos logical drives (joy)

28. Jan. 2002
- 1-bit color depth on Falcon now in proper black-on-white colors (joy)
- machine_init() split to two phases - machine_detect() can be called very
  early() and new machine_init() creates cookies etc. (joy)
- screen.c now detects proper screen size from VIDEL registers - there's no
  more trash on the screen - the size is set to 640x480 (joy)
- lineainit.c sets the variables according to proper screen resolution (joy)
- fixed BDOS 16-bit FAT - integer computing was overflowing in fsdrive.c (joy)

30. Jan. 2002
- bdos/osmem.c variables init fixed. (joy)
- bios/blkdev.c - mediach returns "not changed" status for hard drives (joy)
- bios/machine.c - _FRB buffer for DMA operations to FastRAM added (joy)
- bios/floppy.c - floppy rwabs now use _FRB if destination is in FastRAM (joy)

03. Feb. 2002
- bios/screen.c - do not change VIDEL freq by Shifter init code (joy)
- bios/blkdev.c - buf must be incremented (thanks Laurent) (joy)
                - getbpb no more divide by zero error (thanks Laurent) (joy)
- bios/floppy.c - corrent blkdev[].unit init for floppy B: (thx Laurent) (joy)

06. Mar. 2002
- bios/machine.c - got rid of some compiler warnings

07. Mar. 2002
- Made the VDI compilable again... And it even seems already to work a little
  bit (THH)

08. Mar. 2002
- Cleaned up the AES sources, added prototypes and header files. The AES can
  now be linked with the rest of EmuTOS. (THH)

11. Mar. 2002
- vdi/lisastub.c cleaned up of warnings 
- vdi/gsxextrn.h added prototypes

12. Mar. 2002
- vdi/* made prototypes, no warnings anymore, indented whole vdi (MAD) 
- vdi/* jmptbl.c changed jumptables functions to void - arguments 
  are passed in arrays in VDI, not via stack.  (MAD)
- vdi/lisagem.S partially implemented mouse driver
  
13. Mar. 2002
- bios/bios.c removed mouse_init. Done, when graphics is initialized (MAD)

15. Mar. 2002
- vdi/lisagem.S - got the mousedriver working (MAD)
- bios/mouse.c  - Added mouse_init - initial setup of mouse parameters (MAD)
- bios/mousedrv.S - Separated the mousedriver from VDI (MAD)
- vdi/lisagem.S - Here is now just the VDI part of mousedriver setup (MAD)
- bios/lineainit.c - implemented v_pl_dspl (bytes/plane) for VDI (MAD)
- bios/screen.c - the last patch for real Falcon reverted because it caused
                  black screen under ARAnyM (joy)
17. Mar. 2002
- vdi/* - corrected the swapped #defines to use Atari and/or VME10 (MAD)
- You can now use the AES as user interface instead of EmuCON (THH)
  (by enabling it in the Makefile, however AES is not yet fully working)

18. Mar. 2002
- bios/kprint.c - registers are printed out to ease debugging (joy)

20. Mar. 2002
- The AES are now succeed in loading and running DESKTOP.APP from disk! (THH)
- Moved some more VDI variables to lineavars.S (THH)
- Cleaned up the VDI, it works now quite good in ST-HIGH resolution (THH)

21. Mar. 2002
- doc/changelog.txt - added vdi/ and aes/ to the tgz target (MAD)
- doc/license.txt   - added GPL for EmuTOS (MAD)

25. Mar. 2002
- Included the GEM.RSC into the ROM (THH).

26. Mar. 2002
- bdos/biosmain.c - made DBGIFOS working by disabl. osif  (MAD)
- bdos/umem.c  switched off DBGUMEM and assert by default (MAD)

28. Mar. 2002
- bios/startup.S - changed the _dummyaes vector for fVDI (MAD)
- bios/startup.S - changed label _dummyaes to _gemtrap (MAD)

01. Apr. 2002
- vdi/lisagem.S - SR switched on for timer interrupt (MAD)
- bios/startup.S - did switch on the etv_timer interrupt vector (MAD)

02. Apr. 2002
- vdi/lisagem.S - put mouse drawing additionally to timer_int (MAD)
- vdi/lisagem.S - put _CLEARMEM to vdi/monout.c (MAD)

04. Apr. 2002
- desk/*  -  Added the desktop sources (THH).

05. Apr. 2002
- newer bug - handles different encoding for different languages (LVL)
- added administrative entry in fr.po and de.po (LVL)
- encoding specified in po/LINGUAS (LVL)
- started removing Kamenicky encoding (LVL)
- doc/todo.txt: added 'Czech i18n' section (LVL)
- added version 0.2a in include/version.h, printed by initinfo.c (LVL)
- make release generates a TGZ named after include/version.h (LVL)
- GPL re-formatted to 72 chars wide (copied over the standard file) (LVL)
- cookie_swi commented out in bios/machine.c (bus error in some cases) (LVL)
- misc involuntary whitespace changes in some files (LVL)
- added po/cs.po from Bohdan for Czech native language support  (MAD)

08. Apr. 2002
- bios/mousedrv.S - cleaned up a bit (MAD) 
- vdi/lisagem.S - did remove SR saving in tick_int, like in TOS (MAD)
- aes/* - removed some warnings (MAD)
- bdos/fs* - replaced NULPTR completely by NULLPTR  (MAD)

09. Apr. 2002
- vdi/vdimouse.S - renamed all VEX* functions to lower case (MAD)
- vdi/lisagem.S - renamed EX_TIMV to vex_timv (MAD)
- removed Kamenicky fonts (LVL)
- added ISO latin2 fonts (LVL)
- added CS po file (LVL)
- changed for consistancy CZ to CS as a country name (LVL)
- Makefile: fixed typo for desktop obj files (LVL)
- added some const keywords here and there (LVL)

10. Apr. 2002
- Added additional application stack in aes/gemshlib.c so that it is now
  possible to start another application at least. However, it will still
  crash when it finishs. (THH)
- Some minor bug fixes in aes and desk (THH)
- Disabled the autoexec stuff in bios/startup.S, I think creating a new
  baspage for that is not really necessary (THH).

11. Apr. 2002
- Finally found the other bug that caused EmuTOS to crash when running a
  GEM application (dos_exec() was not reentrant) (THH)
- Now linking desk_rsc.c into EmuTOS, too (THH)

13. Apr. 2002
- doc/vdibind.txt - added documentation for vdi routine implementation (MAD)
- doc/vdimouse.S - put all mouse related stuff here in (MAD)

14. Apr. 2002
- bios/lineavars.S - corrected length and memory position of vars (MAD)

15. Apr. 2002
- finally commited in Czech keyboard (LVL)

16. Apr. 2002
- bios/mousedrv.S - moved to vdi/mouse.drv, because it is not BIOS (MAD)
- vdi/mousedrv.S - did put all non-graphical functions here (MAD)
- vdi/vdimouse.S - did put all graphical functions here (MAD)

16. Apr. 2002
- vdi/mousedrv.S - moved some more routines in there (MAD)

18. Apr. 2002
- vdi/opnwkram - added right screen coordinates to wk info (MAD)

20. Apr. 2002
- vdi/vdimouse.S - used concat routine for screen offset calculation (MAD)
- vdi/vdimouse.S - got mouse working for big screens (MAD)
- vdi/* - got all other routines working for big screens too (MAD)
- vdi/* - remove also many vme10 #ifdefs too (MAD)

20. Apr. 2002
- desk/* - removed/fixed all compiler warnings (MAD)
- vdi/opnwkram - plane number and fonts corr. initialized (MAD)

23. Apr. 2002
- Makefile - fal_$(DESASS) removed on make clean (LVL)
- Fixed text and mouse drawing in VDI color mode (THH).
- Improved the desktop's about dialog (THH).
- bios/startup.S - VBL video mode change written (disabled) (MAD)

24. Apr. 2002
- vdi/* - switched some jmptbl functions to lowercase (MAD)
- vdi/bezier - added raw bezier code from PC GEM's GDOS - not yet working (MAD)

25. Apr. 2002
- vdi/* - switched some more functions to lowercase (MAD)
- vdi/text.c - ripped mono blitting (MAD)

26. Apr. 2002
- vdi/vmouse.c - implemented vex and some other mouse funcs in C (MAD)
- util/miscasm.S - added for smaller asm routines (MAD)
- bdos/umem.c - added missing break in a case that is responsible
                for returning free memory - now everything works OK! (joy)

27. Apr. 2002
- vdi/*.S - changed // back to * inside comments (LVL)
- aes/large.S - moved LSTCPY to util/stringasm.S named strlencpy (LVL)
- aes/optimopt.S - replaced strchk by strcmp (LVL)
- aes/ - removed some calls to scabs by calls to strchr (LVL)
- aes/optimopt.S - replaced bfill by memset, rewrote rest of file (LVL)
- util/stringasm.S - added strlencpy and strchr (LVL)
- aes/gsx2.S - cleaned up, gave better names to labels (LVL)
- updated some todo items (LVL)
- aes/ - wrote comments trying to understand how the processes work (LVL)

28. Apr. 2002
- desk/desk_rsc.c - added string translation using gettext (LVL)
- po/fr.po - updated FR translations to include desktop strings (LVL)
- vdi/vdimain.c - VDI startup and other stuff  (MAD)
- vdi/opnwkram.c -> vdimain.c, file deleted (MAD)
- vdi/vex.c -> vdimain.c, file deleted (MAD)
- vdi/lisagem.S -> vdimain.c, file deleted (MAD)
- vdi/txtblit.S - CLC_DDA now in C in text.c:clc_dda  (MAD)

29. Apr. 2002
- bios/config.h - moved to include/config.h (LVL)
- include/config.h - set CONF_NO_NLS = 1 to disable NLS completely (LVL)
- bios/country.c - moved keyb and font selection tables here from ikbd.c and
    initlinea.c, in an attempt to make next Changelog item easier (LVL)
- include/config.h - set CONF_UNIQUE_COUNTRY = 1 to save some room by
    including only one set of keyboard and fonts in the ROM (LVL)
- renamed back CS into CZ to please Petr; did not alter po/cs.po (LVL)
- vdi/vinput.c - rewrote some key stuff in C (MAD)

02. May. 2002
- Added John Elliott's "Desktop 1.2" patches - it's not enabled yet since
  it is quite instable, but you can enable it by compiling with "-DDESK1"
  and adding desk/desk1.c to your Makefile (THH).

04. May. 2002
- po/POTFILES.in - removed cli files (LVL)
- added experimental ACSI support in acsi.c; it does work on STonC but
  freezes the atari when no hard disk is present. Activate it by setting
  CONF_WITH_ACSI in include/config.h (LVL)
- bios/tosvars.h: hz_200 declared as volatile (LVL)

05. May 2002
- Makefile : Now linking with gcc instead of ld, so we don't depend
  on a particular library folder (THH).
- aes/gemsuper.c : Added a simple fsel_exinput() (THH).
- Fixed AES keyboard bug (gsx_char() and strlencpy() have been wrong) (THH).

10. May. 2002
- bios/bios.c: changed the init order. ACSI now works on STonC and STonX.
  (the trouble was, the DMA timeouts didn't work because the timer C was not
  enabled at the time when disk initialisation occurred) (LVL)
- added limited parallel port implementation (output only) (LVL)
- indented some files (LVL)
- bios/floppy.c: FastRAM floppy read/write (FRB usage was read-only); 
  flopvbl added (but still no efficient mediach()) (LVL)
- Makefile: added size checks for targets 192, 256, 512. (LVL)
- vdi/gsxasm1.S: made __ABLINE externally visible (LVL)
- updated some doc/ files (LVL)

14. May. 2002
- vdi/vinput.c - renamed to vdiinput.c, should hold all input stuff (MAD)
- vdi/vdiinput.c - implemented gloc_key in C, more will follow (MAD)

16. May. 2002
- vdi/vdimouse.S - moved/rewrote DIS_CUR to monobj.c:dis_cur()  (MAD)
- vdi/vdiinput.c - moved/rewrote vdimouse_init/exit to here (MAD)
- vdi/vdimouse.S - move rest of asm routines from mousedrv.S to here (MAD)
- vdi/mousedrv.S - deleted
- util/miscasm.S - put trap1/13/14 to here from bdos/ for common use (MAD) 
- include/asm.h - added trap1/13/14 calls as externals (MAD)
- vdi/vdiinput.c - vdimouse_init() fixed (MAD)

17. May. 2002
- vdi/*.c - replaced all gotos by other constructs (MAD)
- vdi/lisastubs - removed, put into vdi/monobj.c for less files (MAD)

18. May. 2002
- vdi/text.c - act_siz implemented in C (asm commented out) (MAD)

30. May 2002
- aes/* - Removed all "REG"s in old function declarations, GCC seems to
  have problems with "registered" parameters. This fixes the GEM dialog
  bug that caused the text fields not to redraw correctly (THH).
- aes/gemsuper.c - Changed the AES version back to 1.02, seems to work
  better this way with most applications (THH).
- vdi/isin.c - removed. Did put functions to vdi/monout.c (MAD)
  vdi/cbssdefs.c - removed. Did put functions to vdi/vdimain.c (MAD)
  vdi/jmptbl.c - removed. Did put tables to vdi/vdimain.c (MAD)
  vdi/jmptbl.h - removed. Did put prototypes to vdi/vdimain.c (MAD)
- vdi/lisatabl.c - removed. Tables distributed to where they belong (MAD)
- vdi/screen.hlp - removed. Info put into vdi/vdiconf.h (MAD)
- vdi/attrib.h - moved to vdi/vdidef.h (MAD)
- vdi/fontdef.h - integrated in vdi/vdidef.h (MAD)

15. Jun. 2002
- bios/memory.S - separated Falcon and ST stuff, still a memconfig bug? (MAD)

16. Jun. 2002
- bios/detect.S - removed, put into processor.S and vector.S (MAD)
- bios/vectors.S - put exception stuff here in (mostly from startup.S). (MAD)

22. Jun. 2002
- Makefile - factored out some code for building sized images (LVL)
- doc/changelog.txt - editorial changes back in the past (LVL)
- doc/authors.txt - a first attempt. Please don't feel offended if I forgot
  something. The idea is to be able in a second phase to remove the 'Authors' 
  lines in our source file headers that IMHO are not truly meaningful (LVL)

23. Jun. 2002
- include/config.h - Added TOS_VERSION define to switch TOS versions and
  to reduce size if compiling a 192kB image (THH)

01. Jul. 2002
- doc/processor.h - added some documentation about processor handling (LVL)
- tools/bug.c 
  - prints "entry" instead of "entries" when only one entry (LVL)
  - GEM Alert strings folded at vertical bars in po files (LVL)
  - experimental translation directly within C files (LVL)
- wrappers for (x)bios functions not present unless DBG_(X)BIOS is set; moved
  (x)bios function tables out of vectors.S into (x)bios.c (LVL)
- bdos/fs*.[ch] - renamed rwabs to longjmp_rwabs for clarity (LVL)
- */*_rsc.c 
  - aes resource translation added, sharing code with desk/desk_rsc.c (LVL)
  - folded long strings: no source line longer than 80 chars (LVL)
- po/fr.po - full FR translation (LVL)
- Makefile 
  - gmake black magic :-) shrinks down the size of build rules (LVL)
  - experimental building of a unique-country translated EmuTOS (LVL)
- removed some 'extern' from C source files (should go in .h files) (LVL)
- bios/version.c - removed, was commented out for some time now (LVL)
- po/de.po - some german translations done (MAD)

09. Jul. 2002
- po/de.po - all german translations done (MAD)

19. Jul. 2002
- bios/processor.S - added skeleton for privileged instruction handler (MAD)

20. Jul. 2002
- bios/ikbd.[ch], bios/vectors.S - added key repeat (LVL)
- bios/bios.c - priviledge exception ignored (LVL)
- doc/authors.txt - updated and added email addresses (LVL)

22. Jul. 2002 
- po/de.po - two more german translations done (MAD)
- po/cs.po - did bug update cs.po for new translations (MAD)

23. Jul. 2002
- bios/vector.S - implemented priv. instr. handler (MAD)
                - moved ill. and priv. instr. handlers here. (MAD)

24. Jul. 2002
- bios/vector.S - changed priv. instr. handler (MAD)
- bios/bios.c - Now here all basic vector is done in vecs_init() (MAD)

27. Jul. 2002
- desk/deskapp.c - Enabled/fixed loading and saving of DESKTOP.INF, but
  the file is now called EMUDESK.INF due to some incompatibilities with
  the original GEM's DESKTOP.INF. Added automatic drive scanning when there
  is no such file, too. (THH)
- aes/gemfmlib.c - Dialogs can now be left by pressing ENTER, too. (THH)

29. Jul. 2002
- vdi/gsxvars.S - removed. Variables are in their related source (MAD)

30. Jul. 2002
- vdi/gsxasm*.c - Fixed bug in VDI that sometimes wrote to ROM area (THH).
- aes/crysbind.h - Size of the addr_in array was not big enough for
  fsel_exinput(). Now this AES call should work, too. (THH)
- desk/deskapp.c - EMUDESK.INF is now always saved to the root directory of
  the start drive. (THH)
- bios/lineavars.S - unneeded _TEXT_BG, _COPYTRAN, _FILL_ABORT removed (MAD)
- vdi/* - some mouse cursor stuff implemented in C (MAD)
- vdi/vdimouse.S - removed rbp, used !vme10 instead (MAD)
- vdi/gsxdef.h - empty, deleted  (MAD)

30. Jul. 2002
- vdi/vdiinput.c - fixed bug in vb_draw routine (MAD)

01. Aug. 2002
- bios/blkdev.c - booting from harddisk enabled (joy)
- bios/disk.[ch] - ARANYM_NATIVE_DISK does not crash other machines now.
                   Also it makes use of new ARAnyM XHDI function XHREADWRITE.
                   Harddisk is now read/write (if enabled in ARAnyM).

07. Aug. 2002
- po/cs.po - Bohdan's czech language translation of GEM (MAD)
- vdi/ecslisa - unused, just left for reference for now (MAD)
- vdi/vdiesc.c - implementation in C (MAD)

09. Aug. 2002
- bios/startup.S - Filled the remaining empty ROM header entries (THH).
- aes/gemasm.S - Accessories are now working on CPUs >= 68010, too! (THH).
- bios/fntlat2_*.c - Czech language okay (make COUNTRY=cz) but file now is
  too big for 256k: comment out another country in po/LINGUAS to try out
  cz country on a <256k emulator; UNIQUE cz does not work yet (LVL)
- bios/startup.S - deleted unused function vidchng() (MAD)

11. Aug. 2002
- bios/startup.S - added NatFeat detection code (joy)
- bios/bios.c - added 'int native_features' flag (please move elsewhere as 
  appropriate - it's definitely not bios related but will be used mostly
  there) (joy)
- bios/disk.c - adapted to NatFeat. Finally clean XHDI interface that other
  emulators may follow. (joy)
- bios/machine.c - a very hackish code for reading NF_NAME in place
  of emulated machine name. Where to get a bit of free RAM? Please fix it.
  (joy)
- bios/initinfo.c - added 5 seconds delay so users can enjoy machine name.
  The waiting is not using CPU STOP insn yet. Also needs to be
  interruptable by a keypress. Would be nice if it was possible to jump
  to the EmuShell instead of booting the GEM by pressing a key. (joy)

14. Aug. 2002
- desk/icons - removed unnecessary 48x24 icons, added sed scripts to help edit
  icons (LVL)
- desk/desk_rsc.c - menu items are automatically adjusted to the right size
  after translation; I don't think this hack would work in the general case
  but for the current desktop it works fine (no sub-menus, icons, ...) (LVL)

16. Aug. 2002
- vdi/gsxasm1.S - fixed bug in CLC_FLIT (no regs was saved) (MAD)
- vdi/gsxasm1.S - also needed reg-save wrapper added for vec_len (MAD)

17. Aug. 2002
- vdi/monout.c - smul_div now in C (part. from fVDI) (MAD)
               - pline optimized (from fVDI) (MAD)
               - vec_len implemented in C (MAD)

18. Aug. 2002
- vdi/text.c - trnsfont implemented in C (MAD)

20. Aug. 2002
- vdi/vdimain.c - precalculated shift offset shft_off for concat (MAD)
- Makefile, include/config.h, country.mk, bios/country.c - changed the way
  UNIQUE country EmuTOS are built. Now make unique 192 and 256k work for 
  all languages (e.g. make allbin; rm obj/*.o; make all192) but there is
  some redundancy as I can't figure yet how to avoid duplication between
  country.mk and country.c (LVL)
- tools/bug.c - removed indent warning (LVL)
- include/version.c - set version to 0.5 (LVL)
- bios/clock.c - disabled nvram code for TOS1 192k ROMS (LVL)
- bios/bios.c bios/machine.[ch] bios/startup.S - int native_features 
  renamed to int has_natfeats (LVL)
- bios/initinfo.c - changed wait time from 5 to 2 sec (MAD)

21. Aug. 2002
- doc/announce.txt - updated for release 0.5 (MAD)

27. Aug. 2002
- Makefile - replaced "-O2" by "-Os" for smaller size (MAD)

01. Sep. 2002
- doc/status - updated a bit (MAD)

03. Sep. 2002
- bdos/bdosmain.c - Removed unused Setvec/Getvec functions. (THH)
- vdi/monout.c - abline() in C part. implemented (commented out) (MAD)
